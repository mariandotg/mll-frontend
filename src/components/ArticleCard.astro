---
import type { Post } from '../models/Post';
import {urlForImage} from "../utils/imageBuilder"

interface Props {
  article: Post;
}

const { slug, title, imageUrl } = Astro.props.article;

let image = urlForImage(imageUrl?.asset?._ref).width(500).height(300).url()

const image320 = imageUrl ? urlForImage(imageUrl?.asset?._ref).width(320).url() : image;
const image640 = imageUrl ? urlForImage(imageUrl?.asset?._ref).width(640).url() : image;
const image1024 = imageUrl ? urlForImage(imageUrl?.asset?._ref).width(1024).url() : image;
---
<a
    href={`/posts/${slug.current}`}
    class='rounded-md group hover:text-primary-green flex flex-col gap-2 article-card'
>
    <!-- <div class='h-[150px] w-[250px] overflow-hidden rounded-lg relative'> -->
        <div class="image-container overflow-hidden rounded-lg relative">
            <div class="opacity-0 transition-opacity duration-300 bg-dark group-hover:opacity-25 absolute inset-0" />
            <img
                src={image640}
                srcset={`${image320} 320w, ${image640} 640w, ${image1024} 1024w`}
                sizes="(max-width: 320px) 280px, (max-width: 640px) 600px, (max-width: 1024px) 900px, 100vw"
                alt={`${title}`}
                class="w-full h-auto"
            />
        </div>
        <div class='flex flex-col p-1 gap-2'>
        <!-- <span class='text-[12px]/[12px] text-slate-400 group-hover:text-blue-400'>
            {created_at?.toLocaleDateString()} | {author}
        </span> -->
        <div class='flex flex-col gap-1'>
            <h3 class='text-xl'>{title}</h3>
            <!-- <p class='text-sm text-slate-400 group-hover:text-blue-400'>
            {description}
            </p> -->
        </div>
</a>
<style>
    .article-card {
      width: 100%;
      /* max-width: 320px; */
    }

    .image-container {
        width: 100%;
        height: 200px; /* ajustar */
    }

    @media (min-width: 640px) {
        .article-card {
            max-width: 600px;
        }
        .image-container {
            height: 150px;
        }
    }
  
    @media (min-width: 1024px) {
        .article-card {
            max-width: 900px;
        }
    }
  
    @media (min-width: 1280px) {
        .article-card {
            max-width: 320px;
        }
    }
    
    .image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
  </style>